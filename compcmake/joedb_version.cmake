include_guard(GLOBAL)

file(STRINGS "${CMAKE_CURRENT_LIST_DIR}/../VERSION" QUOTED_JOEDB_VERSION)
string(REPLACE "\"" "" JOEDB_VERSION ${QUOTED_JOEDB_VERSION})
string(REGEX MATCH "^[0-9]+" JOEDB_VERSION_MAJOR ${JOEDB_VERSION})
string(REGEX MATCH "\\.[0-9]+\\." JOEDB_VERSION_CENTER ${JOEDB_VERSION})
string(REGEX MATCH "[0-9]+" JOEDB_VERSION_MINOR ${JOEDB_VERSION_CENTER})
string(REGEX MATCH "[0-9]+$" JOEDB_VERSION_PATCH ${JOEDB_VERSION})
math(EXPR JOEDB_VERSION_INT "${JOEDB_VERSION_PATCH} + 100 * ${JOEDB_VERSION_MINOR} + 10000 * ${JOEDB_VERSION_MAJOR}")
add_definitions(-DJOEDB_VERSION=${JOEDB_VERSION_INT})
