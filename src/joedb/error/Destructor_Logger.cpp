#include "joedb/error/Destructor_Logger.h"
#include "joedb/error/Stream_Logger.h"

#include <iostream>

namespace joedb
{
 static Stream_Logger default_logger(std::cerr);
 Logger *Destructor_Logger::the_logger = &default_logger;

 ////////////////////////////////////////////////////////////////////////////
 void Destructor_Logger::warning(std::string_view message) noexcept
 ////////////////////////////////////////////////////////////////////////////
 {
  if (the_logger)
   the_logger->write("joedb: destructor warning: " + std::string(message) + '\n');
 }

 ////////////////////////////////////////////////////////////////////////////
 void Destructor_Logger::set_logger(Logger *new_logger)
 ////////////////////////////////////////////////////////////////////////////
 {
  the_logger = new_logger;
 }

 ////////////////////////////////////////////////////////////////////////////
 void Destructor_Logger::set_logger()
 ////////////////////////////////////////////////////////////////////////////
 {
  the_logger = &default_logger;
 }

 ////////////////////////////////////////////////////////////////////////////
 void Destructor_Logger::remove_logger()
 ////////////////////////////////////////////////////////////////////////////
 {
  the_logger = nullptr;
 }
}
