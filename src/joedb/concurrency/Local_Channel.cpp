#include "joedb/concurrency/Local_Channel.h"

#include <boost/asio/connect.hpp>

namespace joedb
{
 //////////////////////////////////////////////////////////////////////////
 Local_Channel::Local_Channel(const std::string &endpoint_path):
 //////////////////////////////////////////////////////////////////////////
  socket(io_context)
 {
  socket.connect(endpoint_path);
 }

 //////////////////////////////////////////////////////////////////////////
 size_t Local_Channel::write_some(const char *data, size_t size)
 //////////////////////////////////////////////////////////////////////////
 {
  return socket.write_some(boost::asio::buffer(data, size));
 }

 //////////////////////////////////////////////////////////////////////////
 size_t Local_Channel::read_some(char *data, size_t size)
 //////////////////////////////////////////////////////////////////////////
 {
  return socket.read_some(boost::asio::buffer(data, size));
 }

 //////////////////////////////////////////////////////////////////////////
 Local_Channel::~Local_Channel() = default;
 //////////////////////////////////////////////////////////////////////////
}
