#include "joedb/Signal.h"

namespace joedb
{
 std::atomic<int> Signal::signal(Signal::no_signal);

 ////////////////////////////////////////////////////////////////////////////
 void CDECL Signal::signal_handler(int sig)
 ////////////////////////////////////////////////////////////////////////////
 {
  signal = sig;
 }

 ////////////////////////////////////////////////////////////////////////////
 void Signal::start()
 ////////////////////////////////////////////////////////////////////////////
 {
  std::signal(SIGINT, signal_handler);
  std::signal(SIGUSR1, signal_handler);
  std::signal(SIGUSR2, signal_handler);
 }

 ////////////////////////////////////////////////////////////////////////////
 void Signal::stop()
 ////////////////////////////////////////////////////////////////////////////
 {
  std::signal(SIGINT, SIG_DFL);
  std::signal(SIGUSR1, SIG_DFL);
  std::signal(SIGUSR2, SIG_DFL);
 }
}
