#include "JournalFile.h"

using namespace joedb;

/////////////////////////////////////////////////////////////////////////////
JournalFile::JournalFile(const char *file_name, File::mode_t mode):
/////////////////////////////////////////////////////////////////////////////
 file(file_name, mode),
 checkpoint_index(0)
{
}

/////////////////////////////////////////////////////////////////////////////
void JournalFile::checkpoint()
/////////////////////////////////////////////////////////////////////////////
{
 checkpoint_index ^= 1;
 file.flush();
}

/////////////////////////////////////////////////////////////////////////////
JournalFile::~JournalFile()
/////////////////////////////////////////////////////////////////////////////
{
 checkpoint();
}
