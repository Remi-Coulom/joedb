#include "db/test_dbname_base64.h"
#include "db/test_dbname_ascii.h"
#include "db/test/Database.h"

#include "gtest/gtest.h"

/////////////////////////////////////////////////////////////////////////////
static void test(const my_namespace::is_nested::test::Database &db)
/////////////////////////////////////////////////////////////////////////////
{
 EXPECT_EQ(db.get_name(db.get_person_table().get_at(1)), "RÃ©mi");
 EXPECT_EQ(db.get_name(db.get_person_table().get_at(2)), "Norbert");
 EXPECT_EQ(db.get_name(db.get_person_table().get_at(3)), "Alexandre");
}

/////////////////////////////////////////////////////////////////////////////
TEST(joedb_embed, base64)
/////////////////////////////////////////////////////////////////////////////
{
 test(my_namespace::is_nested::test::get_embedded_dbname_base64());
}

/////////////////////////////////////////////////////////////////////////////
TEST(joedb_embed, escape)
/////////////////////////////////////////////////////////////////////////////
{
 test(my_namespace::is_nested::test::get_embedded_dbname_ascii());
}

