#include "db/testdb_test_base64.h"
#include "db/testdb_test_escape.h"
#include "db/testdb.h"

#include "gtest/gtest.h"

/////////////////////////////////////////////////////////////////////////////
static void test(const my_namespace::is_nested::testdb::Database &db)
/////////////////////////////////////////////////////////////////////////////
{
 EXPECT_EQ(db.get_name(db.get_person_table().get_at(1)), "RÃ©mi");
 EXPECT_EQ(db.get_name(db.get_person_table().get_at(2)), "Norbert");
 EXPECT_EQ(db.get_name(db.get_person_table().get_at(3)), "Alexandre");
}

/////////////////////////////////////////////////////////////////////////////
TEST(joedb_embed, base64)
/////////////////////////////////////////////////////////////////////////////
{
 test(my_namespace::is_nested::testdb::get_embedded_test_base64());
}

/////////////////////////////////////////////////////////////////////////////
TEST(joedb_embed, escape)
/////////////////////////////////////////////////////////////////////////////
{
 test(my_namespace::is_nested::testdb::get_embedded_test_escape());
}

